{% extends "clubHomePage/base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-clubhomepage{% endblock %}
{%block slugurl%}{{page.slug}}{%endblock%}
{%block slugurlrepeat%}{{page.slug}}{%endblock%}
{%block name%}{{page.title}}{%endblock%}
{%block navbargenerator%}<li class='active' ><a href='/' id='homelink'>Home</a></li>
{%for pgc in page.get_children %}
<li><a href="{{pgc.slug}}">{{pgc.title}}</a></li>
{%endfor%}
{%endblock%}
{% block content %}

<div class="container">
  <h2>Carousel Example</h2>
  <div id="myCarousel" class="carousel slide" data-ride="carousel" style="position:relative;">
    <ol class="carousel-indicators">
        {% for block in page.slideshow %}
        {% if block.block_type == 'Image' %}
        {%ifequal forloop.counter0 0%}
        <li data-target="#myCarousel" data-slide-to="{{forloop.counter0}}" class="active"></li>
        {%else%}
        <li data-target="#myCarousel" data-slide-to="{{forloop.counter0}}"></li>
        {%endifequal%}
        {% endif %}
        {% endfor %} 

    </ol>

    <div class="carousel-inner">


        {% for block in page.slideshow %}
        {% if block.block_type == 'Image' %}

        {%ifequal forloop.counter0 0%}
        <div class="item active">
            {%image block.value.image original as tmp%}
            <img src='{{tmp.url}}' style='width:100%' />
            <div class="carousel-caption">
              <h3>{{block.value.caption}}</h3>
          </div>
      </div>
      {%else%}
      <div class="item"> 
          {%image block.value.image original as tmp%}
          <img src='{{tmp.url}}'  style='width:100%' />
          <div class="carousel-caption">
              <h3>{{block.value.caption}}</h3>
          </div>
      </div>
      {%endifequal%}
      {% endif %}
      {% endfor %} 


  </div>

  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
  </a>
</div>
</div>
<!--
<div class="split-slideshow">
  <div class="slideshow">
    <div class="slider">
      {% for block in page.slideshow %}
      {% if block.block_type == 'Image' %}
      <div class="item"> 
          {%image block.value.image original as tmp%}
          <img src='{{tmp.url}}'  width='1000px'/>

      </div>
      {% endif %}
      {% endfor %} 
  </div>
</div>
<div class="slideshow-text">
    {% for block in page.slideshow %}
    {% if block.block_type == 'Image' %}
    <div class="item"> 
      {{block.value.caption}}
  </div>
  {% endif %}
  {% endfor %} </div>
</div>
<script type="text/javascript">
    var $slider = $('.slideshow .slider'),
    maxItems = $('.item', $slider).length,
    dragging = false,
    tracking,
    rightTracking;

    $sliderRight = $('.slideshow').clone().addClass('slideshow-right').appendTo($('.split-slideshow'));

    rightItems = $('.item', $sliderRight).toArray();
    reverseItems = rightItems.reverse();
    $('.slider', $sliderRight).html('');
    for (i = 0; i < maxItems; i++) {
        $(reverseItems[i]).appendTo($('.slider', $sliderRight));
    }

    $slider.addClass('slideshow-left');
    $('.slideshow-left').slick({
        vertical: true,
        verticalSwiping: true,
        arrows: false,
        infinite: true,
        dots: false,
        speed: 1000,
        cssEase: 'cubic-bezier(0.7, 0, 0.3, 1)'
    }).on('beforeChange', function(event, slick, currentSlide, nextSlide) {

        if (currentSlide > nextSlide && nextSlide == 0 && currentSlide == maxItems - 1) {
            $('.slideshow-right .slider').slick('slickGoTo', -1);
            $('.slideshow-text').slick('slickGoTo', maxItems);
        } else if (currentSlide < nextSlide && currentSlide == 0 && nextSlide == maxItems - 1) {
            $('.slideshow-right .slider').slick('slickGoTo', maxItems);
            $('.slideshow-text').slick('slickGoTo', -1);
        } else {
            $('.slideshow-right .slider').slick('slickGoTo', maxItems - 1 - nextSlide);
            $('.slideshow-text').slick('slickGoTo', nextSlide);
        }
    })
    function changeImage(){
     $slider.slick('slickNext')
 };
 setInterval(changeImage,2000);
 
 $('.slideshow-right .slider').slick({
    swipe: false,
    vertical: true,
    arrows: false,
    infinite: true,
    speed: 950,
    cssEase: 'cubic-bezier(0.7, 0, 0.3, 1)',
    initialSlide: maxItems - 1
});
 $('.slideshow-text').slick({
    swipe: false,
    vertical: true,
    arrows: false,
    infinite: true,
    speed: 900,
    cssEase: 'cubic-bezier(0.7, 0, 0.3, 1)'
});
</script>
-->
<div class='contentname '>
    {%for post in aevent %}
    <hr>
    {% for block in post.specific.event%}
    {%if forloop.counter0 <= 1 %}
    {% if block.block_type == 'evnt' %}
    {% if block.value.isActive == 1 %} 
    <h3> {{ block.value.title }} </h3>
    <p> {{ block.value.intro }}</p>
    <p>Event Starts At :{{ block.value.start }}</p>
    <p>Location :{{ block.value.venue }}</p>
    <hr>
    {% endif %}
    {% endif %}
    {% endif %}
    {% endfor %}
    {%endfor%}

    <p>About Us: </br> {{ page.AboutUs|richtext }}</p>
    <p>Vision: </br> {{ page.Vision|richtext }}</p>
</div>
{% endblock %}